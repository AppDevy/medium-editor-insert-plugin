/*! 
 * medium-editor-insert-plugin v0.1.1 - jQuery insert plugin for MediumEditor
 *
 * Maps Addon
 *
 * https://github.com/orthes/medium-editor-images-plugin
 * 
 * Copyright (c) 2013 Pavel Linkesch (http://linkesch.sk)
 * Released under the MIT license
 */
!function(a){a.fn.mediumInsert.maps={init:function(){this.$el=a.fn.mediumInsert.insert.$el,this.geocoder=new google.maps.Geocoder},setMapCenterForGeocoderResults:function(b,c,d){var e=a(b.getDiv()),f=c[0].geometry.location;d==google.maps.GeocoderStatus.OK&&(b.setCenter(f),e.attr("data-lat",f.lat()).attr("data-lng",f.lng()))},setEvents:function(b){var c=this,d=a(b.getDiv()),e=d.parents(".mediumInsert-maps"),f=function(a,d){c.setMapCenterForGeocoderResults(b,a,d)};e.on("click",".mediumInsert-maps-search button",function(){var b=a(".mediumInsert-maps-search input",e).val();c.geocoder.geocode({address:b},f)}),e.on("keyup",".mediumInsert-maps-search input",function(b){13===b.keyCode&&a(this).siblings("button").click()})},mapInit:function(a){var b=a.data("lat"),c=a.data("lng"),d={center:new google.maps.LatLng(b,c),zoom:2,scrollwheel:!1},e=new google.maps.Map(a.get(0),d);return this.setEvents(e),e},add:function(b){var c;a.fn.mediumInsert.insert.deselect(),b.append('<div class="mediumInsert-maps"><div class="mediumInsert-maps-search"><input type="text" placeholder="Find on the map"><button>Find</button></div><div class="mediumInsert-map"></div></div>'),c=a(".mediumInsert-map",b).attr("data-lat",40).attr("data-lng",0),this.mapInit(c)}}}(jQuery);